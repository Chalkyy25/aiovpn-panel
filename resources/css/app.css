/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Alpine helper */
[x-cloak] { display: none !important; }

/* =========================
   Theme tokens
   Light default, .dark overrides
   ========================= */
:root {
  --aio-bg:      #334155;
  --aio-card:    #f8fafc;
  --aio-ink:     #1F2937;
  --aio-header:  #1e293b;
  --aio-sub:     #64748b;

  --aio-border:  rgba(0,0,0,.15);
  --aio-soft:    rgba(0,0,0,.05);
  --aio-hover:   rgba(0,0,0,.03);

  --aio-accent:       #3b82f6;     /* blue-500 */
  --aio-accent-weak:  rgba(59,130,246,.25);

  --aio-success: #10b981;
  --aio-warning: #f59e0b;
  --aio-danger:  #ef4444;

  /* Background gradient stops - dark slate to lighter grey */
  --aio-bg-1: #334155;   /* top - slate-700 (lighter) */
  --aio-bg-2: #64748b;   /* bottom - slate-500 (lighter) */
}

.dark {
  --aio-bg:      #0f172a;
  --aio-card:    #1e293b;
  --aio-ink:     #f1f5f9;
  --aio-sub:     #94a3b8;

  --aio-border:  rgba(255,255,255,.1);
  --aio-soft:    rgba(255,255,255,.05);
  --aio-hover:   rgba(255,255,255,.03);

  --aio-accent:      #60a5fa;      /* blue-400 */
  --aio-accent-weak: rgba(96,165,250,.25);

  --aio-success: #34d399;
  --aio-warning: #fbbf24;
  --aio-danger:  #f87171;

  /* Background gradient stops - very dark slate */
  --aio-bg-1: #0f172a;   /* top - slate-900 */
  --aio-bg-2: #1e293b;   /* bottom - slate-800 */
}

/* =========================
   Base
   ========================= */
@layer base {
  html, body { min-height: 100%; }

  body {
    color: var(--aio-ink);
    background-color: var(--aio-bg);
  }
}

/* =========================
   Background (single source of truth)
   Apply .aio-bg to <body>
   ========================= */
@layer components {
  .aio-bg {
    background:
      radial-gradient(1000px 600px at 15% -10%, rgba(148,163,184,.15), transparent 65%),
      radial-gradient(1200px 700px at 90% 15%, rgba(100,116,139,.12), transparent 60%),
      linear-gradient(180deg, var(--aio-bg-1), var(--aio-bg-2));
    background-color: var(--aio-bg);
    background-attachment: fixed;
  }

  .dark .aio-bg {
    background:
      radial-gradient(1000px 600px at 15% -10%, rgba(71,85,105,.15), transparent 65%),
      radial-gradient(1200px 700px at 90% 15%, rgba(51,65,85,.12), transparent 60%),
      linear-gradient(180deg, var(--aio-bg-1), var(--aio-bg-2));
    background-color: var(--aio-bg);
    background-attachment: fixed;
  }

  /* =========================
     Cards / header surfaces
     ========================= */
  .aio-card,
  .aio-header {
    @apply rounded-xl border;
    background: var(--aio-card) !important;
    border-color: var(--aio-border) !important;
    border-top: 3px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 14px 35px -8px rgba(0, 0, 0, 0.35), 
                0 10px 15px -8px rgba(0, 0, 0, 0.28),
                0 25px 50px -12px rgba(0, 0, 0, 0.25);
    transform: translateY(0);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .aio-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4), 
                0 18px 30px -12px rgba(0, 0, 0, 0.32),
                0 40px 80px -16px rgba(0, 0, 0, 0.3);
  }

  /* Card sections with automatic padding */
  .aio-card-header,
  .aio-card-body,
  .aio-card-footer {
    @apply px-6 py-5;
  }

  .aio-card-header {
    @apply border-b;
    border-color: var(--aio-border);
  }

  .aio-card-footer {
    @apply border-t;
    border-color: var(--aio-border);
  }

  .aio-divider { border-color: var(--aio-border); }

  .aio-section {
    @apply rounded-2xl border;
    background: var(--aio-card) !important;
    border-color: var(--aio-border) !important;
    border-top: 3px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 14px 35px -8px rgba(0, 0, 0, 0.35), 
                0 10px 15px -8px rgba(0, 0, 0, 0.28),
                0 25px 50px -12px rgba(0, 0, 0, 0.25);
    transform: translateY(0);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .aio-section:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4), 
                0 18px 30px -12px rgba(0, 0, 0, 0.32),
                0 40px 80px -16px rgba(0, 0, 0, 0.3);
  }
  .aio-section + .aio-section { @apply mt-6; }

  /* Section parts with automatic padding */
  .aio-section-header,
  .aio-section-body,
  .aio-section-footer {
    @apply px-6 py-5;
  }

  .aio-section-header {
    @apply border-b;
    border-color: var(--aio-border);
  }

  .aio-section-footer {
    @apply border-t;
    border-color: var(--aio-border);
  }

  .aio-section-title {
    @apply flex items-center gap-2 text-lg font-semibold mb-1;
    color: var(--aio-ink);
  }
  .aio-section-sub { @apply text-sm mb-4; color: var(--aio-sub); }

  /* =========================
     Forms
     ========================= */
  .form-grid { @apply grid gap-4; grid-template-columns: 1fr; }
  @media (min-width: 768px) { .form-grid { grid-template-columns: 1fr 1fr; } }

  .form-group { @apply flex flex-col gap-1.5; }
  .form-label { @apply text-sm font-medium; color: var(--aio-ink); }
  .form-help  { @apply text-xs; color: var(--aio-sub); }

  .form-input,
  .form-select,
  .form-textarea {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    @apply w-full rounded-lg border px-3 py-2.5 outline-none transition;
    background: var(--aio-card);
    border-color: var(--aio-border);
    color: var(--aio-ink);
  }

  .form-textarea { @apply min-h-[110px] resize-y; }

  .form-input::placeholder,
  .form-textarea::placeholder {
    color: color-mix(in srgb, var(--aio-sub) 70%, transparent);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    border-color: var(--aio-accent);
    box-shadow: 0 0 0 3px var(--aio-accent-weak);
  }

  .form-select {
    appearance: none;
    background-image:
      linear-gradient(45deg, transparent 50%, currentColor 50%),
      linear-gradient(135deg, currentColor 50%, transparent 50%);
    background-position: calc(100% - 22px) 1.05em,
                         calc(100% - 16px) 1.05em;
    background-size: 6px 6px, 6px 6px;
    background-repeat: no-repeat;
    padding-right: 2.5rem;
  }

  .form-check { @apply inline-flex items-center gap-2 text-sm; color: var(--aio-ink); }
  .form-check input[type="checkbox"] {
    @apply h-4 w-4 rounded border;
    background: var(--aio-card);
    border-color: var(--aio-border);
    accent-color: var(--aio-accent);
  }

  /* =========================
     Pills
     ========================= */
  .aio-pill {
    display:inline-flex; align-items:center; gap:.375rem;
    padding:.25rem .5rem; border-radius:.5rem;
    background: var(--aio-soft);
    border: 1px solid var(--aio-border);
    color: var(--aio-ink);
    font-size:.8125rem;
    line-height:1rem;
  }

  .pill-success {
    background: color-mix(in srgb, var(--aio-success) 14%, transparent);
    border-color: color-mix(in srgb, var(--aio-success) 35%, transparent);
    color: var(--aio-success);
  }
  .pill-warning {
    background: color-mix(in srgb, var(--aio-warning) 14%, transparent);
    border-color: color-mix(in srgb, var(--aio-warning) 35%, transparent);
    color: var(--aio-warning);
  }
  .pill-danger {
    background: color-mix(in srgb, var(--aio-danger) 14%, transparent);
    border-color: color-mix(in srgb, var(--aio-danger) 35%, transparent);
    color: var(--aio-danger);
  }

  /* =========================
     Dashboard tiles
     ========================= */
  .pill-card {
    @apply rounded-xl border;
    background: var(--aio-card);
    border-color: var(--aio-border);
    border-top: 3px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 14px 35px -8px rgba(0, 0, 0, 0.35), 
                0 10px 15px -8px rgba(0, 0, 0, 0.28),
                0 25px 50px -12px rgba(0, 0, 0, 0.25);
    transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease;
  }
  .pill-card:hover {
    transform: translateY(-8px);
    background: var(--aio-card);
    box-shadow: 0 30px 60px -15px rgba(0, 0, 0, 0.45), 
                0 20px 35px -12px rgba(0, 0, 0, 0.35),
                0 50px 90px -20px rgba(0, 0, 0, 0.32);
  }

  /* =========================
     Tables
     ========================= */
  .aio-table {
    width: 100%;
    font-size: 0.875rem;
    line-height: 1.25rem;
  }

  .aio-table thead th {
    text-align: left;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: .06em;
    color: var(--aio-sub);
    background: color-mix(in srgb, var(--aio-card) 92%, var(--aio-hover));
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--aio-border);
    white-space: nowrap;
  }

  .aio-table tbody td {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--aio-border);
    color: var(--aio-ink);
    vertical-align: middle;
  }

  .aio-table tbody tr:hover td { background: var(--aio-hover); }

  .aio-table .cell-muted  { color: var(--aio-sub); }
  .aio-table .cell-right  { text-align: right; }
  .aio-table .cell-nowrap { white-space: nowrap; }

  .muted { color: var(--aio-sub); }
}

/* =========================
   Utilities
   ========================= */
.brand-logo { height: 32px; max-height: 32px; width: auto; object-fit: contain; }
.aio-overlay { position: relative; }
.aio-overlay > * { pointer-events: auto; }
