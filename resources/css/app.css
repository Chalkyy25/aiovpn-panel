/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Alpine helper */
[x-cloak] { display: none !important; }

/* =========================
   Theme tokens (neutral)
   Light default, .dark overrides
   ========================= */
:root {
  --aio-bg:      #f3f4f6;
  --aio-card:    #ffffff;
  --aio-ink:     #111827;
  --aio-sub:     #6b7280;
    --aio-bg-1: #eef4ff;   /* stronger top */
  --aio-bg-2: #e6eef9;   /* deeper bottom */
  --aio-glow: radial-gradient(
    800px 420px at 20% -10%,
    rgba(37,99,235,0.18),
    transparent 60%
  );

  --aio-border:  rgba(17,24,39,.12);
  --aio-soft:    rgba(17,24,39,.06);
  --aio-hover:   rgba(17,24,39,.03);

  --aio-accent:       #2563eb;     /* blue-600 */
  --aio-accent-weak:  rgba(37,99,235,.18);

  --aio-success: #16a34a;
  --aio-warning: #d97706;
  --aio-danger:  #dc2626;
}

.dark {
  --aio-bg:      #0b1220;
  --aio-card:    #111827;
  --aio-ink:     #e5e7eb;
  --aio-sub:     #9ca3af;
  --aio-bg-1: #0b1220;   /* top */
  --aio-bg-2: #0f1a33;
    --aio-glow: color-mix(in srgb, var(--aio-accent) 18%, transparent);


  --aio-border:  rgba(255,255,255,.12);
  --aio-soft:    rgba(255,255,255,.06);
  --aio-hover:   rgba(255,255,255,.04);

  --aio-accent:      #60a5fa;      /* blue-400 */
  --aio-accent-weak: rgba(96,165,250,.22);

  --aio-success: #22c55e;
  --aio-warning: #f59e0b;
  --aio-danger:  #ef4444;
}

/* =========================
   Base
   ========================= */
@layer base {
  body {
    color: var(--aio-ink);
    background:
      var(--aio-glow),
      radial-gradient(
        900px 500px at 110% 10%,
        rgba(37,99,235,0.12),
        transparent 55%
      ),
      linear-gradient(
        180deg,
        var(--aio-bg-1),
        var(--aio-bg-2)
      );
    background-attachment: fixed;
  }
}

/* =========================
   Components
   ========================= */
@layer components {

  /* Cards / header surfaces (legacy classes still supported) */
  .aio-card,
  .aio-header {
    @apply rounded-xl border;
    background: var(--aio-card);
    border-color: var(--aio-border);
  }

  .aio-divider { border-color: var(--aio-border); }

  /* Sections (if still used) */
  .aio-section {
    @apply rounded-2xl border p-5 md:p-6;
    background: var(--aio-card);
    border-color: var(--aio-border);
  }
  .aio-section + .aio-section { @apply mt-6; }

  .aio-section-title {
    @apply flex items-center gap-2 text-lg font-semibold mb-1;
    color: var(--aio-ink);
  }
  .aio-section-sub { @apply text-sm mb-4; color: var(--aio-sub); }

  /* =========================
     Forms
     ========================= */
  .form-grid { @apply grid gap-4; grid-template-columns: 1fr; }
  @media (min-width: 768px) { .form-grid { grid-template-columns: 1fr 1fr; } }

  .form-group { @apply flex flex-col gap-1.5; }
  .form-label { @apply text-sm font-medium; color: var(--aio-ink); }
  .form-help  { @apply text-xs; color: var(--aio-sub); }

  .form-input,
  .form-select,
  .form-textarea {
    @apply w-full rounded-lg border px-3 py-2.5 outline-none transition;
    background: var(--aio-card);
    border-color: var(--aio-border);
    color: var(--aio-ink);
  }

  .form-textarea { @apply min-h-[110px] resize-y; }

  .form-input::placeholder,
  .form-textarea::placeholder {
    color: color-mix(in srgb, var(--aio-sub) 70%, transparent);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    border-color: var(--aio-accent);
    box-shadow: 0 0 0 3px var(--aio-accent-weak);
  }

  /* Select arrow (consistent across browsers) */
  .form-select {
    appearance: none;
    background-image:
      linear-gradient(45deg, transparent 50%, currentColor 50%),
      linear-gradient(135deg, currentColor 50%, transparent 50%);
    background-position: calc(100% - 22px) calc(1.05em),
                         calc(100% - 16px) calc(1.05em);
    background-size: 6px 6px, 6px 6px;
    background-repeat: no-repeat;
    padding-right: 2.5rem;
  }

  .form-check { @apply inline-flex items-center gap-2 text-sm; color: var(--aio-ink); }
  .form-check input[type="checkbox"] {
    @apply h-4 w-4 rounded border;
    background: var(--aio-card);
    border-color: var(--aio-border);
    accent-color: var(--aio-accent);
  }

  /* =========================
     Pills / status
     ========================= */
  .aio-pill {
    display:inline-flex; align-items:center; gap:.375rem;
    padding:.25rem .5rem; border-radius:.5rem;
    background: var(--aio-soft);
    border: 1px solid var(--aio-border);
    color: var(--aio-ink);
    font-size:.8125rem;
    line-height:1rem;
  }

  .pill-success {
    background: color-mix(in srgb, var(--aio-success) 14%, transparent);
    border-color: color-mix(in srgb, var(--aio-success) 35%, transparent);
    color: var(--aio-success);
  }
  .pill-warning {
    background: color-mix(in srgb, var(--aio-warning) 14%, transparent);
    border-color: color-mix(in srgb, var(--aio-warning) 35%, transparent);
    color: var(--aio-warning);
  }
  .pill-danger {
    background: color-mix(in srgb, var(--aio-danger) 14%, transparent);
    border-color: color-mix(in srgb, var(--aio-danger) 35%, transparent);
    color: var(--aio-danger);
  }

  /* =========================
     Dashboard cards
     ========================= */
  .pill-card {
    @apply rounded-xl border;
    background: var(--aio-card);
    border-color: var(--aio-border);
    transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease;
  }
  .pill-card:hover {
    transform: translateY(-2px);
    background: color-mix(in srgb, var(--aio-card) 96%, var(--aio-hover));
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
  }

  /* =========================
     Sidebar (neutral)
     ========================= */
  .nav-pill { background: transparent; border: 1px solid transparent; }

  /* (Optional) old classes still won't break, but nav-link now controls active styles */

  /* =========================
     Tables (single source of truth)
     ========================= */
  .aio-table {
    width: 100%;
    font-size: 0.875rem;
    line-height: 1.25rem;
  }

  .aio-table thead th {
    text-align: left;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: .06em;
    color: var(--aio-sub);
    background: color-mix(in srgb, var(--aio-card) 92%, var(--aio-hover));
    padding: .75rem 1rem;
    border-bottom: 1px solid var(--aio-border);
    white-space: nowrap;
  }

  .aio-table tbody td {
    padding: .75rem 1rem;
    border-bottom: 1px solid var(--aio-border);
    color: var(--aio-ink);
    vertical-align: middle;
  }

  .aio-table tbody tr:hover td { background: var(--aio-hover); }

  .aio-table .cell-muted  { color: var(--aio-sub); }
  .aio-table .cell-right  { text-align: right; }
  .aio-table .cell-nowrap { white-space: nowrap; }

  /* Compatibility: if any old pages still use table-dark */
  .table-dark { @apply min-w-full text-sm text-left; }
  .table-dark thead tr,
  .table-dark tbody tr { border-bottom: 1px solid var(--aio-border); }
  .table-dark th, .table-dark td { @apply px-4 py-2; }

  .muted { color: var(--aio-sub); }
}

/* =========================
   Utilities
   ========================= */
.brand-logo { height: 32px; max-height: 32px; width: auto; object-fit: contain; }
.aio-overlay { position: relative; }
.aio-overlay > * { pointer-events: auto; }